<template>
    <div>
        <Menubar :model="items">
        <template #end>
            <input
            type="text"
            placeholder="Buscar..."
            class="p-2 border rounded-lg"
            />
            <!-- v-model="searchQuery" -->
            <!-- @input="searchPosts" -->
      </template>
    </Menubar>
  </div>
</template>

<script setup lang="ts">
// The commented part  
// import { ref } from 'vue'

const router = useRouter();
const { signIn, signOut } = useAuth();
// const searchQuery = ref('');

type Item = {
  label: string;
  icon: string;
  command: () => void;
};

const HOME: Item = {
  label: "Home",
  icon: "pi pi-home",
  command: () => router.push("/"),
};

const LOGIN: Item = {
  label: "Login",
  icon: "pi pi-sign-in",
  command: () => signIn("auth0"),
};

const PROFILE: Item = {
  label: "Profile",
  icon: "pi pi-user",
  command: () => router.push("/me"),
};

const LOGOUT: Item = {
  label: "Logout",
  icon: "pi pi-sign-out",
  command: () => signOut({ callbackUrl: "/" }),
};

const { status } = useAuth();
const items = ref<Item[]>([HOME, LOGIN]);
if (status.value === "authenticated") {
  items.value = [HOME, PROFILE, LOGOUT];
}

// const searchPosts = () => {
//   if (searchQuery.value.trim() !== '') {
//     router.push(`/search?q=${encodeURIComponent(searchQuery.value)}`);
//   }
// };
</script>
